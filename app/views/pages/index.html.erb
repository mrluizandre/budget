<div class="row">
  <div class="col-12 col-sm-9 scrollable-y">
    <div class="table-responsive">
      <table class="table table-sm table-notbreakline table-budget">
        <thead>
          <tr>
            <th>Category</th>
            <th class="text-right">Budgeted</th>
            <th class="d-none d-sm-block text-right">Activity</th>
            <th class="text-right">Available</th>
          </tr>
        </thead>
        <tbody>
          <% @categories.each do |cat| %>
            <tr onclick="show_category_sidebar(<%= cat.id %>)">
              <td><%= cat.name %></td>
              <td class="text-right">
                <!-- <%= number_to_currency cat.budgeted %> -->
                <%= form_tag(budget_category_path(cat), class: 'form-inline float-right') do %>
                    <%= text_field_tag :budgeted, cat.budgeted, step: 0.01 %>
                <% end %>
              </td>
              <td class="text-right d-none d-sm-block"><%= number_to_currency cat.activity %></td>
              <td class="text-right">
                <span class="badge badge-pill badge-lg <%= badge_color_category cat %>">
                  <%= number_to_currency cat.balance %>
                </span>
                <!--
                <%= form_tag(budget_category_path(cat), html: { class: 'form-inline' }) do %>
                    <%= number_field_tag :balance, cat.balance, step: 0.01 %>
                          
                    <%= submit_tag 'Save', class: 'btn btn-outline-secondary btn-sm' %>
                <% end %>
              -->
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <div class="col-12 col-sm-3 scrollable-y">
    <% @categories.each do |cat| %>
      <div class="table_scheduled_transactions_cat_<%= cat.id %>">
        <% if cat.scheduled_transactions.any? %>  
          <h3><%= cat.name%> </h3>
          <table class="table table-bordered">
            <thead>
              <tr>
                <td>Date</td>
                <td>Amount</td>
              </tr>
            </thead>
            <tfoot>
              <tr>
                <td>Total</td>
                <td><%= number_to_currency cat.scheduled_transactions.inject(0.0){|sum,st| sum + st.amount }%></td>
              </tr>
            </tfoot>
            <tbody>
              <% cat.scheduled_transactions.each do |st| %>
              <tr>
                <td><%= st.date.strftime("%d/%m/%Y") %></td>
                <td><%= number_to_currency st.amount %></td>
              </tr>
              <% end %>
            </tbody>
          </table>
        <% end %>
      </div>
    <% end %>
  </div>
</div>